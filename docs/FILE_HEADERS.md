<!--
SPDX-License-Identifier: MIT OR Apache-2.0
Copyright (c) 2025 John William Creighton (@s243a)
-->
# File Header Quick Reference

Quick guide for adding SPDX headers to UnifyWeaver files.

## TL;DR

- **Source code files** (.pl, .py, .sh) → Add SPDX header
- **User documentation** (README, guides) → Add SPDX header
- **Academic papers** (.tex, .pdf) → No header, use directory README
- **When in doubt** → Check examples below

## Source Code Files

### Prolog Files (.pl)

```prolog
% SPDX-License-Identifier: MIT OR Apache-2.0
% Copyright (c) 2025 s243a

:- encoding(utf8).
:- module(my_module, [exported_pred/1]).

% Your code here
```

### Bash Scripts (.sh)

```bash
#!/usr/bin/env bash
# SPDX-License-Identifier: MIT OR Apache-2.0
# Copyright (c) 2025 s243a

# Your code here
```

### Python Files (.py)

```python
# SPDX-License-Identifier: MIT OR Apache-2.0
# Copyright (c) 2025 s243a

"""Module docstring"""

# Your code here
```

### Makefiles

```makefile
# SPDX-License-Identifier: MIT OR Apache-2.0
# Copyright (c) 2025 s243a

.PHONY: all clean

all:
	# Your targets here
```

## Documentation Files

### Markdown Documentation

```markdown
<!--
SPDX-License-Identifier: MIT OR Apache-2.0
Copyright (c) 2025 s243a
-->

# Document Title

Your documentation here...
```

**Use for:**
- README.md
- ARCHITECTURE.md
- Tutorial files
- API documentation
- How-to guides

## Special Cases

### Academic Papers - Directory Level Licensing

**Structure:**
```
papers/
├── README.md                    ← SPDX header HERE
├── LICENSE-CC-BY                ← License text
└── state_machines/
    ├── paper.tex                ← NO header
    ├── paper.bib                ← NO header
    ├── paper.pdf                ← NO header
    └── figures/                 ← NO headers
```

**papers/README.md:**
```markdown
<!--
SPDX-License-Identifier: CC-BY-4.0
Copyright (c) 2025 s243a
-->

# UnifyWeaver Research Papers

All papers in this directory are licensed under CC-BY-4.0.

## Published Papers

- **Paper Title** (2025) - `state_machines/`
  - Journal: Journal of Logic Programming
  - DOI: 10.xxxx/xxxxx
```

**Why no headers in paper files:**
- Must follow journal formatting requirements
- SPDX headers violate academic style guidelines
- Licensing declared at directory level
- Paper files remain in submission format

### Example Output/Generated Files

**Generated bash scripts:**
```bash
#!/bin/bash
# Generated by UnifyWeaver from ancestor.pl
# This generated code is licensed under MIT OR Apache-2.0

declare -A ancestor_data=(
    ["alice:bob"]=1
)
```

**Why include licensing:**
- Generated code is distributed
- Users need to know the license
- Can be brief comment form

### Configuration Files

**YAML/JSON for CI/CD:**
```yaml
# SPDX-License-Identifier: MIT OR Apache-2.0
# Copyright (c) 2025 s243a

name: CI
on: [push, pull_request]
```

**Simple config files (optional):**
```json
{
  "_comment": "SPDX-License-Identifier: MIT OR Apache-2.0",
  "version": "1.0.0"
}
```

## Multiple Contributors

When multiple people contribute significantly to a file:

```prolog
% SPDX-License-Identifier: MIT OR Apache-2.0
% Copyright (c) 2025 s243a
% Copyright (c) 2025 Jane Contributor
```

**Add contributor when:**
- Major refactoring (>20% of file changed)
- Significant new functionality
- Core algorithm implementation

**Don't add for:**
- Typo fixes
- Formatting changes
- Minor bug fixes

## Files That Don't Need Headers

### Binary Files
- Images (.png, .jpg)
- Compiled files (.beam, .o)
- Archives (.zip, .tar.gz)

**Why:** License declared at directory/repository level

### Third-Party Code

**Keep original headers:**
```prolog
% SPDX-License-Identifier: BSD-3-Clause
% Copyright (c) 2020 Original Author
%
% This file is from library_name (https://example.com)
% Used with permission under BSD-3-Clause license
```

## Quick Decision Tree

```
Is it source code (.pl, .py, .sh, etc)?
├─ YES → Add SPDX header to file
└─ NO
    ├─ Is it user documentation (README, guides)?
    │  ├─ YES → Add SPDX header to file
    │  └─ NO
    │      ├─ Is it an academic paper?
    │      │  ├─ YES → No header in paper, add to directory README
    │      │  └─ NO
    │      │      ├─ Is it a binary/generated file?
    │      │      │  ├─ YES → No header needed
    │      │      │  └─ NO → Use directory README with licensing
```

## Common Mistakes

### ❌ Wrong: Header in LaTeX Paper

```latex
% SPDX-License-Identifier: CC-BY-4.0  % ← DON'T DO THIS
\documentclass{article}
\title{My Paper}
```

### ✅ Correct: Directory README

```markdown
papers/README.md with licensing info
paper.tex stays clean
```

### ❌ Wrong: Forgetting encoding in Prolog

```prolog
% SPDX-License-Identifier: MIT OR Apache-2.0
:- module(my_module, []).  % ← Missing encoding
```

### ✅ Correct: Include encoding

```prolog
% SPDX-License-Identifier: MIT OR Apache-2.0
% Copyright (c) 2025 s243a

:- encoding(utf8).  % ← Include this
:- module(my_module, []).
```

## When in Doubt

1. **Check existing files** in the same directory
2. **Ask in PR discussion** if unsure
3. **Default to including SPDX header** for code files
4. **Use directory README** for special cases (papers, docs without headers)

## See Also

- [LICENSE_ADMINISTRATION.md](LICENSE_ADMINISTRATION.md) - Full licensing guide
- [CONTRIBUTING.md](CONTRIBUTING.md) - Contribution guidelines
- [SPDX Specification](https://spdx.dev/specifications/) - Official SPDX docs